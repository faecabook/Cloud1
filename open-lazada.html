<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ร้านของฉัน</title>
  <style>
    body {
      font-family: "Noto Sans Thai", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: linear-gradient(135deg, #fff5f2, #ffffff);
      text-align: center;
      padding: 20px;
    }
    img {
      width: 90px;
      margin-bottom: 16px;
    }
    h1 {
      color: #ee4d2d;
      font-size: 1.5rem;
      margin: 10px 0;
    }
    p {
      color: #444;
      font-size: 1rem;
      margin: 0 0 20px;
      line-height: 1.5;
    }
    button {
      width: 80%;
      max-width: 320px;
      background: linear-gradient(90deg, #ee4d2d, #d73211);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 14px 20px;
      font-size: 1rem;
      cursor: pointer;
      margin: 6px 0;
      transition: transform 0.2s;
    }
    button:hover { transform: scale(1.05); }
    .btn-lazada {
      background: linear-gradient(90deg, #0f9dff, #005bbb);
    }
    small {
      display:block;
      margin-top:16px;
      color:#777;
    }
  </style>
</head>
<body>
  <img src="https://cdn-icons-png.flaticon.com/512/3670/3670322.png" alt="Shop Logo">
  <h1>ร้านของฉัน</h1>
  <p id="message">กำลังตรวจสอบ...</p>

  <!-- ปุ่มเปิด Shopee -->
  <button id="openShopee" style="display:none;">เปิดร้านในแอป Shopee</button>

  <!-- ปุ่มไป Lazada -->
  <button id="openLazada" class="btn-lazada">ไปยังร้านค้าใน Lazada</button>

  <small>ถ้าไม่พบแอป Shopee ระบบจะพาไปยังเว็บ</small>

  <script>
    const shopShopee = "https://s.shopee.co.th/7KoJhT5zjg";
    const shopLazada = "https://s.lazada.co.th/s.Z0X5YO";

    const message = document.getElementById("message");
    const shopeeButton = document.getElementById("openShopee");
    const lazadaButton = document.getElementById("openLazada");

    const ua = navigator.userAgent;
    const isFacebook = ua.includes("FBAN") || ua.includes("FBAV") || ua.includes("Instagram");

    // ปุ่ม Lazada — เปิดได้ทุกที่
    lazadaButton.addEventListener("click", () => {
      window.location.href = shopLazada;
    });

    if (isFacebook) {
      // ถ้าเปิดใน Facebook
      message.textContent = "⚠️ คุณกำลังเปิดลิงก์จากแอป Facebook / Instagram";
      shopeeButton.style.display = "inline-block";
      shopeeButton.textContent = "เปิดในเบราว์เซอร์ภายนอก (Chrome / Safari)";
      shopeeButton.addEventListener("click", () => {
        window.open(shopShopee, "_blank");
      });
    } else {
      // ถ้าเปิดใน Chrome/Safari — เด้งแอป Shopee อัตโนมัติ
      message.textContent = "กำลังพยายามเปิดแอป Shopee...";
      const timeout = 1500;
      let opened = false;

      const handleVisibility = () => {
        if (document.hidden) opened = true;
      };
      document.addEventListener("visibilitychange", handleVisibility);

      if (/Android/i.test(ua)) {
        const intentUrl = "intent://open#Intent;scheme=shopee;package=com.shopee.th;end";
        window.location = intentUrl;
      } else {
        const iframe = document.createElement("iframe");
        iframe.style.display = "none";
        iframe.src = "shopee://";
        document.body.appendChild(iframe);
        setTimeout(() => {
          try { document.body.removeChild(iframe); } catch(e){}
        }, 2000);
      }

      setTimeout(() => {
        document.removeEventListener("visibilitychange", handleVisibility);
        if (!opened) {
          message.textContent = "ไม่พบแอป Shopee → พาไปหน้าเว็บร้านแทน...";
          window.location.href = shopShopee;
        } else {
          message.textContent = "เปิดแอป Shopee สำเร็จ ✓";
        }
      }, timeout);
    }
  </script>
</body>
</html>
