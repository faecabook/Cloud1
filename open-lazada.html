<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>เปิดร้านของฉัน</title>
  <style>
    body {
      font-family: "Noto Sans Thai", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: linear-gradient(135deg, #fff5f2, #ffffff);
      text-align: center;
      padding: 20px;
    }
    img {
      width: 90px;
      margin-bottom: 20px;
    }
    h1 {
      color: #ee4d2d;
      font-size: 1.5rem;
      margin: 0 0 10px;
    }
    p {
      color: #444;
      margin-bottom: 20px;
      line-height: 1.6;
    }
    button {
      background: linear-gradient(90deg, #ee4d2d, #d73211);
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: 14px 20px;
      margin: 6px 0;
      font-size: 1rem;
      width: 260px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    button:hover { transform: scale(1.05); }
    .lazada-btn {
      background: linear-gradient(90deg,#1a73e8,#1251b2);
    }
    small { margin-top: 16px; color: #777; display: block; }
  </style>
</head>
<body>

  <img src="https://cdn-icons-png.flaticon.com/512/3670/3670322.png">
  <h1>ร้านของฉัน</h1>
  <p id="message">กำลังตรวจสอบ...</p>

  <!-- ปุ่มเปิดภายนอก -->
  <button id="openShopeeBtn" style="display:none;">เปิดร้าน Shopee ใน Chrome / Safari</button>
  <button id="openLazadaBtn" class="lazada-btn" style="display:none;">เปิดร้าน Lazada ใน Chrome / Safari</button>

  <small>ถ้าไม่มีแอป ระบบจะพาไปเว็บร้านโดยอัตโนมัติ</small>

<script>
  const shopeeUrl = "https://s.shopee.co.th/7KoJhT5zjg";
  const lazadaUrl = "https://s.lazada.co.th/s.Z0X5YO";

  const message = document.getElementById("message");
  const shopeeBtn = document.getElementById("openShopeeBtn");
  const lazadaBtn = document.getElementById("openLazadaBtn");

  // ตรวจจับว่าเป็น Facebook / IG / LINE หรือไม่
  const ua = navigator.userAgent;
  const isBlockedBrowser =
    ua.includes("FBAN") || ua.includes("FBAV") ||
    ua.includes("Instagram") || ua.includes("Line");

  if (isBlockedBrowser) {
    // ❌ อยู่ใน in-app browser → บังคับให้เปิดภายนอก
    message.textContent = "⚠️ คุณเปิดลิงก์นี้จากแอป Facebook / Instagram / LINE";

    shopeeBtn.style.display = "inline-block";
    lazadaBtn.style.display = "inline-block";

    shopeeBtn.onclick = () => window.open(shopeeUrl, "_blank");
    lazadaBtn.onclick = () => window.open(lazadaUrl, "_blank");

  } else {
    // ✅ ไม่ใช่ in-app browser → พยายามเปิดแอป Shopee อัตโนมัติ
    message.textContent = "กำลังเปิดแอป Shopee...";

    let opened = false;

    document.addEventListener("visibilitychange", () => {
      if (document.hidden) opened = true;
    });

    if (/Android/i.test(ua)) {
      window.location = "intent://open#Intent;scheme=shopee;package=com.shopee.th;end";
    } else {
      const iframe = document.createElement("iframe");
      iframe.style.display = "none";
      iframe.src = "shopee://";
      document.body.appendChild(iframe);
      setTimeout(() => { try { document.body.removeChild(iframe) } catch(e){} }, 2000);
    }

    setTimeout(() => {
      if (!opened) {
        message.textContent = "ไม่พบแอป Shopee — กำลังไปเว็บร้าน...";
        window.location.href = shopeeUrl;
      } else {
        message.textContent = "เปิดแอป Shopee สำเร็จ ✓";
      }
    }, 1500);
  }
</script>

</body>
</html>
